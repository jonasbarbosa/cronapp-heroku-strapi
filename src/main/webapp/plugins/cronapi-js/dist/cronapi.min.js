(window.fixedTimeZone===void 0||null===window.fixedTimeZone)&&(window.fixedTimeZone=!0),(window.timeZone===void 0||null===window.timeZone)&&(window.timeZone="UTC"),(window.timeZoneOffset===void 0||null===window.timeZoneOffset)&&(window.timeZoneOffset=0),window.systemTimeZoneOffset=window.timeZoneOffset,window.fixedTimeZone||(window.timeZoneOffset=moment().utcOffset()),function(){'use strict';var _StringfromCharCode=String.fromCharCode;this.$evt=function(e){var a=this;a.$eval||(a=angular.element(event.target).scope()),a.$eval(e)}.bind(this),this.cronapi={},this.cronapi.toDate=function(e){return new Date(e)};var getDatasource=function(e){return"string"==typeof e?window[e]:e};this.cronapi.doEval=function(e){return e},this.cronapi.evalInContext=function(js){var result=eval("this.cronapi.doEval("+js+")");if(result){if(result.commands)for(var func,i=0;i<result.commands.length;i++)func=eval(result.commands[i].function),func.apply(this,result.commands[i].params);return result.value}},this.cronapi.client=function(pack){return{attr:function(){return this},run:function(){var bk;try{bk=eval("blockly."+pack)}catch(a){}return bk||(bk=eval(pack)),bk.apply(this,arguments)}.bind(this)}};var serverMap={};this.cronapi.server=function(e){var a=!1;return{attr:function(){return a=!0,this},run:function(){for(var t=e,n=0;n<arguments.length;n++)t+=arguments[n]+"";if(a){if(serverMap.hasOwnProperty(t))return"$$loading"==serverMap[t]?"":serverMap[t];serverMap[t]="$$loading"}var o=e.split("."),r=o[o.length-1];o.pop();for(var c=o.join("."),s=function(e){this.safeApply(function(){a&&(serverMap[t]=e)})}.bind(this),p=function(e){this.safeApply(function(){a&&(serverMap[t]=e)}),e&&this.cronapi.$scope.Notification.error(e)}.bind(this),l=[c+":"+r,s,p],n=0;n<arguments.length;n++)l.push(arguments[n]);this.cronapi.util.makeCallServerBlocklyAsync.apply(this,l)}.bind(this)}},this.cronapi.conversion={},this.cronapi.conversion.asciiToBinary=function(e){var a="";if(0<e.length)for(var t,n=0;n<e.length;n++){t=e.charCodeAt(n);for(var o=7;0<=o;o--)a+=1&t>>o}return a},this.cronapi.conversion.toBoolean=function(e){return this.cronapi.internal.parseBoolean(e)},this.cronapi.conversion.toBytes=function(e){return e?e.toString():""},this.cronapi.conversion.chrToAscii=function(e){return e?e.charCodeAt(0):null},this.cronapi.conversion.stringToJs=function(e){return this.cronapi.internal.stringToJs(e)},this.cronapi.conversion.stringToDate=function(value){var pattern=/^\s*(\d+)[\/\.-](\d+)[\/\.-](\d+)(\s(\d+):(\d+):(\d+))?\s*$/;if(value){if(value instanceof Date)return value;if(pattern.test(value)){var splited=pattern.exec(value),userLang=(navigator.language||navigator.userLanguage).split("-")[0];if("pt"==userLang||"en"==userLang){var functionToCall=eval("cronapi.internal."+userLang+"Date");return functionToCall(splited)}return new Date(value)}return new Date(value)}return null},this.cronapi.conversion.intToHex=function(e){return(+e).toString(16).toUpperCase()},this.cronapi.conversion.toLong=function(e){return parseInt(e)},this.cronapi.conversion.toString=function(e){if(e){var a=new String(e);return a.toString()}return""},this.cronapi.util={},this.cronapi.util.callServerBlocklyAsync=function(e,a,t,n){var o="api/cronapi/call/body/#classNameWithMethod#/".replace("#classNameWithMethod#",e),r=this.cronapi.$scope.http,c=[];$(arguments).each(function(){c.push(this)});var s="";window.uToken&&(s=window.uToken);var p={fields:a,inputs:c.slice(4)},l=this.cronapi.internal.getAddressWithHostApp(o),d=$.ajax({type:"POST",url:l,dataType:"html",data:JSON.stringify(p),headers:{"Content-Type":"application/json","X-AUTH-TOKEN":s,toJS:!0,timezone:moment().utcOffset()},success:t,error:n})},this.cronapi.util.getScreenFields=function(){var fields={};for(var key in this.cronapi.$scope)this.cronapi.$scope[key]&&this.cronapi.$scope[key].constructor&&"DataSet"==this.cronapi.$scope[key].constructor.name&&(fields[key]={},fields[key].active=this.cronapi.$scope[key].active);var scope=this.cronapi.$scope,recursiveLookup=function(scope){var fieldValue;try{fieldValue=eval(scope.vars)}catch(a){}if(fieldValue&&0!==Object.keys(fieldValue).length){var keys=Object.keys(fieldValue);keys.forEach(function(e){void 0!==fieldValue[e]&&null!==fieldValue[e]&&(!fields.vars&&(fields.vars={}),fields.vars[e]=fieldValue[e])})}else if(scope&&scope.$parent)return recursiveLookup(scope.$parent)};for(var key in recursiveLookup(scope),this.cronapi.$scope.params)this.cronapi.$scope.params[key]&&(fields.params||(fields.params={}),fields.params[key]=this.cronapi.$scope.params[key]);return fields},this.cronapi.util.makeCallServerBlocklyAsync=function(blocklyWithFunction,callbackSuccess,callbackError){var fields=this.cronapi.util.getScreenFields(),paramsApply=[];paramsApply.push(blocklyWithFunction),paramsApply.push(fields),paramsApply.push(function(data){var result=this.cronapi.evalInContext(data);"string"==typeof callbackSuccess?eval(callbackSuccess)(result):callbackSuccess&&callbackSuccess(result)}.bind(this)),paramsApply.push(function(data,status,errorThrown){var message=this.cronapi.internal.getErrorMessage(data.responseText,errorThrown);"string"==typeof callbackError?eval(callbackError)(message):callbackError?callbackError(message):this.cronapi.$scope.Notification.error(message)}.bind(this)),$(arguments).each(function(e){3<=e&&paramsApply.push(this)}),this.cronapi.util.callServerBlocklyAsync.apply(this,paramsApply)},this.cronapi.util.callServerBlocklyNoReturn=function(){this.cronapi.util.callServerBlockly.apply(this,arguments)},this.cronapi.util.throwException=function(e){throw e},this.cronapi.util.createException=function(e){return e},this.cronapi.util.callServerBlockly=function(e){for(var a="api/cronapi/call/body/#classNameWithMethod#/".replace("#classNameWithMethod#",e),t=[],n=this.cronapi.util.getScreenFields(),o={fields:n,inputs:t},r=1;r<arguments.length;r++)t.push(arguments[r]);var c="";window.uToken&&(c=window.uToken);var s,p=this.cronapi.internal.getAddressWithHostApp(a),l=$.ajax({type:"POST",url:p,dataType:"html",data:JSON.stringify(o),async:!1,headers:{"Content-Type":"application/json","X-AUTH-TOKEN":c,toJS:!0,timezone:moment().utcOffset()}});if(200==l.status)s=l.responseJSON?l.responseJSON:this.cronapi.evalInContext(l.responseText);else{var d=this.cronapi.internal.getErrorMessage(l.responseText,l.statusText);throw this.cronapi.$scope.Notification.error(d),d}return s},this.cronapi.util.callServerBlocklyAsynchronous=function(e,a,t){if(""!=e&&"function"==typeof a){var t=[e,a,a],n=2;for(n;n<arguments.length;n++)t.push(arguments[n]);this.cronapi.util.makeCallServerBlocklyAsync.apply(this,t)}},this.cronapi.util.executeJavascriptNoReturn=function(value){eval(value)},this.cronapi.util.downloadFile=function(e){var a=this.cronapi.internal.getAddressWithHostApp(e);this.cronapi.screen.openUrl(a,"_blank",0,0)},this.cronapi.util.executeJavascriptNoReturn=function(value){eval(value)},this.cronapi.util.executeJavascriptReturn=function(value){return eval(value)},this.cronapi.util.openReport=function(e){this.cronapi.$scope.getReport(e)},this.cronapi.util.getURLFromOthers=function(e,a,t,n,o,r,c){var s=Object.create(o);s["Content-Type"]=a,$.ajax({method:e,url:t,data:n,headers:s}).success(r.bind(this)).error(c.bind(this))},this.cronapi.util.getUserToken=function(){return JSON.parse(window.localStorage.getItem("_u")).token},this.cronapi.util.setSessionStorage=function(e,a){window.sessionStorage.setItem(e,a)},this.cronapi.util.getSessionStorage=function(e){return window.sessionStorage.getItem(e)},this.cronapi.util.setLocalStorage=function(e,a){window.localStorage.setItem(e,a)},this.cronapi.util.getLocalStorage=function(e){return window.localStorage.getItem(e)},this.cronapi.util.executeAsynchronous=function(e){setTimeout(e,0)},this.cronapi.util.scheduleExecution=function(e,a,t,n,o){o=o||!0,o="true"===o||!0===o;var r=1;"seconds"===n?r=1e3:"minutes"===n?r=6e4:"hours"==n&&(r=36e5),a*=r,t*=r;var c=-1,s=setTimeout(function(){e(),c=setInterval(e,t)}.bind(this),a);o&&this.$on("$destroy",function(){try{clearTimeout(s)}catch(a){}try{clearInterval(c)}catch(a){}})},this.cronapi.util.openReport=function(e,a,t){this.cronapi.$scope.getReport(e,a,t)},this.cronapi.screen={},this.cronapi.screen.fieldFromScreen=function(e){return e},this.cronapi.screen.changeValueOfField=function(e,a){try{this.__tempValue=a;var t=new Function("this."+e+" = this.__tempValue;");this.safeApply(t.bind(this))}catch(a){}},this.cronapi.screen.getValueOfField=function(field){try{if(field&&0<field.length){if(-1<field.indexOf(".active."))return eval(field);var scope=eval("this"),recursiveLookup=function(scope){var fieldValue;try{fieldValue=eval("scope."+field)}catch(a){}return fieldValue?fieldValue:scope&&scope.$parent?recursiveLookup(scope.$parent):""};return recursiveLookup(scope)}return""}catch(a){alert(a)}},this.cronapi.screen.createScopeVariable=function(e,a){this.cronapi.$scope.vars[e]=a},this.cronapi.screen.getScopeVariable=function(e){return this.cronapi.$scope.vars[e]},this.cronapi.screen.notify=function(e,a){(null==a||a==null)&&(a=""),this.cronapi.$scope.Notification({message:a.toString()},e)},this.cronapi.screen.datasourceFromScreen=function(e){return e},this.cronapi.screen.startInsertingMode=function(e){getDatasource(e).$apply(function(){getDatasource(e).startInserting()})},this.cronapi.screen.startEditingMode=function(e){getDatasource(e).$apply(new function(){getDatasource(e).startEditing()})},this.cronapi.screen.previusRecord=function(e){getDatasource(e).$apply(new function(){getDatasource(e).previous()})},this.cronapi.screen.nextRecord=function(e){getDatasource(e).$apply(new function(){getDatasource(e).next()})},this.cronapi.screen.firstRecord=function(e){getDatasource(e).$apply(new function(){var a=getDatasource(e);a.cursor=-1,a.next()})},this.cronapi.screen.lastRecord=function(e){getDatasource(e).$apply(new function(){var a=getDatasource(e);a.cursor=a.data.length-2,a.next()})},this.cronapi.screen.removeRecord=function(e){getDatasource(e).$apply(new function(){getDatasource(e).removeSilent()})},this.cronapi.screen.refreshActiveRecord=function(e){getDatasource(e).refreshActive()},this.cronapi.screen.hasNextRecord=function(e){return getDatasource(e).hasNext()},this.cronapi.screen.quantityRecords=function(e){return getDatasource(e).data.length},this.cronapi.screen.post=function(e){return getDatasource(e).postSilent()},this.cronapi.screen.filter=function(e,a){getDatasource(e).isOData()?getDatasource(e).search(a):getDatasource(e).filter("/"+a)},this.cronapi.screen.changeView=function(view,params){try{function decodeCharParam(value){if(value)for(var param in paramsStopEncode){var regex=eval("/"+param+"/g");value=value.replace(regex,paramsStopEncode[param])}return value}var queryString="",paramsStopEncode={};if(paramsStopEncode["%24"]="$","undefined"!=typeof params)for(var i in Object.keys(params)){var k=Object.keys(params[i])[0],v=Object.values(params[i])[0]+"";queryString&&(queryString+="&"),queryString+=decodeCharParam(encodeURIComponent(k))+"="+encodeURIComponent(v)}var oldHash=window.location.hash;window.location.hash=view+(queryString?"?"+queryString:"");var oldHashToCheck=oldHash+(-1<oldHash.indexOf("?")?"":"?"),viewToCheck=view+(-1<view.indexOf("?")?"":"?");0<=oldHashToCheck.indexOf(viewToCheck)&&window.location.reload()}catch(a){alert(a)}},this.cronapi.screen.openUrl=function(e,a,t,n){try{var o="_self",r="";a&&"true"==a.toString().toLowerCase()&&(o="_blank"),t&&(r+="width="+t+","),n&&(r+="height="+n+","),window.open(e,o,r)}catch(a){alert(a)}},this.cronapi.screen.getParam=function(e){try{for(var a,t=[],n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),o=0;o<n.length;o++)a=n[o].split("="),t.push(a[0]),t[a[0]]=a[1];if(t[e]!==void 0)return decodeURIComponent(t[e])}catch(a){}return null},this.cronapi.screen.confimDialog=function(e){var a=confirm(e);return a},this.cronapi.screen.createDefaultModal=function(e,a,t,n,o,r,c){$("#modalTemplateTitle").text(e),$("#modalTemplateBody").text(a),$("#modalTemplateCancel").text(t),$("#modalTemplateSave").text(n),$("#modalTemplateClose").unbind("click"),$("#modalTemplateClose").click(c),$("#modalTemplateCancel").unbind("click"),$("#modalTemplateCancel").click(r),$("#modalTemplateSave").unbind("click"),$("#modalTemplateSave").click(o),this.cronapi.screen.showModal("modalTemplate")},this.cronapi.screen.showModal=function(a){try{$("#"+a).modal({backdrop:"static",keyboard:!1})}catch(t){$("#"+a).show()}},this.cronapi.screen.setActiveTab=function(e){this.cronapi.$scope.safeApply(function(){$("#"+e).attr("data-target")===void 0?$("[data-target=\"#"+e+"\"]").tab("show"):$("#"+e).tab("show")})},this.cronapi.screen.hideModal=function(a){try{$("#"+a).modal("hide")}catch(t){$("#"+a).hide()}},this.cronapi.screen.showIonicModal=function(e){$("#"+e).data("cronapp-modal")&&$("#"+e).data("cronapp-modal").remove(),this.cronapi.$scope.$ionicModal.fromTemplateUrl(e,{scope:this.cronapi.$scope,animation:"slide-in-up"}).then(function(a){$("#"+e).data("cronapp-modal",a),a.show()})},this.cronapi.screen.hideIonicModal=function(e){if($("#"+e).data("cronapp-modal")){var a=$("#"+e).data("cronapp-modal");a.remove(),$("#"+e).data("cronapp-modal",null)}},this.cronapi.screen.isShownIonicModal=function(e){if($("#"+e).data("cronapp-modal")){var a=$("#"+e).data("cronapp-modal");return a.isShown()}return!1},this.cronapi.screen.showLoading=function(){this.cronapi.$scope.$ionicLoading.show({content:"Loading",animation:"fade-in",showBackdrop:!0,maxWidth:200,showDelay:0})},this.cronapi.screen.hide=function(){this.cronapi.$scope.$ionicLoading.hide()},this.cronapi.screen.getHostapp=function(){return window.hostApp},this.cronapi.screen.searchIds=function(){},this.cronapi.screen.showComponent=function(e){$("#"+e).get(0).style.setProperty("display","block","important")},this.cronapi.screen.hideComponent=function(e){$("#"+e).get(0).style.setProperty("display","none","important")},this.cronapi.screen.disableComponent=function(e){$("#"+e).data("kendoComboBox")?$("#"+e).data("kendoComboBox").enable(!1):$.each($("#"+e).find("*").addBack(),function(e,a){$(a).prop("disabled",!0)})},this.cronapi.screen.enableComponent=function(e){$.each($("#"+e).find("*").addBack(),function(e,a){$(a).prop("disabled",!1)})},this.cronapi.screen.focusComponent=function(e){this.cronapi.$scope.safeApply(function(){tinyMCE&&tinyMCE.get(e)!==void 0?tinyMCE.get(e).focus():$("#"+e).find("*").addBack().focus()})},this.cronapi.screen.changeAttrValue=function(e,a,t){$("#"+e).attr(a,t)},this.cronapi.screen.changeContent=function(e,a,t){if($("#"+e).html(a),!0===t||"true"===t){var n=angular.injector(["ng"]),o=this;n.invoke(["$compile",function(a){a(document.querySelector("#"+e))(o.cronapi.$scope)}])}},this.cronapi.screen.logout=function(){this.cronapi.$scope.logout!=null&&this.cronapi.$scope.logout()},this.cronapi.screen.refreshDatasource=function(e,a){!0==a||"true"==a?this[e].search(this[e].terms,this[e].caseInsensitive):this[e].search("",this[e].caseInsensitive)},this.cronapi.screen.loadMore=function(e){getDatasource(e).$apply(function(){getDatasource(e).nextPage()})},this.cronapi.screen.hasNextPage=function(e){return getDatasource(e).hasNextPage()},this.cronapi.dateTime={},this.cronapi.dateTime.formats=function(){var e=[];return e="pt_br"==this.cronapi.$translate.use()?["DD/MM/YYYY HH:mm:ss","DD/MM/YYYY","DD-MM-YYYY HH:mm:ss","DD-MM-YYYY"]:["MM/DD/YYYY HH:mm:ss","MM/DD/YYYY","MM-DD-YYYY HH:mm:ss","MM-DD-YYYY"],e.push("YYYY-MM-DDTHH:mm:ss"),e.push("HH:mm:ss"),e.push("MMMM"),e},this.cronapi.dateTime.getMomentObj=function(e){var a=moment;if(e instanceof moment)return e;if(e instanceof Date)return a(e).utcOffset(window.timeZoneOffset);var t=this.cronapi.dateTime.formats(),n=null;for(var o in t)if(n=a(e,t[o]),n.isValid())break;return n},this.cronapi.dateTime.getSecond=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("second"):0},this.cronapi.dateTime.getMinute=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("minute"):0},this.cronapi.dateTime.getHour=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("hour"):0},this.cronapi.dateTime.getYear=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("year"):0},this.cronapi.dateTime.getMonth=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("month")+1:0},this.cronapi.dateTime.getDay=function(e){var a=this.cronapi.dateTime.getMomentObj(e);return a?a.get("date"):0},this.cronapi.dateTime.getSecondsBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"seconds")},this.cronapi.dateTime.getMinutesBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"minutes")},this.cronapi.dateTime.getHoursBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"hours")},this.cronapi.dateTime.getDaysBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"days")},this.cronapi.dateTime.getMonthsBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"months")},this.cronapi.dateTime.getYearsBetweenDates=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e),n=this.cronapi.dateTime.getMomentObj(a);return t.diff(n,"years")},this.cronapi.dateTime.incSecond=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("seconds",a).toDate()},this.cronapi.dateTime.incMinute=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("minutes",a).toDate()},this.cronapi.dateTime.incHour=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("hours",a).toDate()},this.cronapi.dateTime.incDay=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("days",a).toDate()},this.cronapi.dateTime.incMonth=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("months",a).toDate()},this.cronapi.dateTime.incYear=function(e,a){var t=this.cronapi.dateTime.getMomentObj(e);return t.add("years",a).toDate()},this.cronapi.dateTime.getNow=function(){var e=moment();return e.toDate()},this.cronapi.dateTime.formatDateTime=function(e,a){return this.cronapi.dateTime.getMomentObj(e).format(a)},this.cronapi.dateTime.newDate=function(e,a,t,n,o,r){var c=new Date;return c.setYear(e),c.setMonth(a-1),c.setDate(t),c.setHours(n),c.setMinutes(o),c.setSeconds(r),this.cronapi.dateTime.getMomentObj(c).toDate()},this.cronapi.dateTime.updateDate=function(e,a,t,n,o,r,c,s){var p=this.cronapi.dateTime.getMomentObj(e).toDate();if(p&&!isNaN(p.getTime()))p.setYear(a),p.setMonth(t-1),p.setDate(n),p.setHours(o),p.setMinutes(r),p.setSeconds(c),p.setMilliseconds(s);else return void this.cronapi.screen.notify("error",this.cronapi.i18n.translate("InvalidDate",[]));return this.cronapi.dateTime.getMomentObj(p).toDate()},this.cronapi.dateTime.updateNewDate=function(e,a,t){var n=this.cronapi.dateTime.getMomentObj(e).toDate();if(n&&!isNaN(n.getTime()))"year"===a?n.setYear(t):"month"===a?n.setMonth(t-1):"day"===a?n.setDate(t):"hour"===a?n.setHours(t):"minute"===a?n.setMinutes(t):"second"===a?n.setSeconds(t):"millisecond"===a?n.setMilliseconds(t):void 0;else return void this.cronapi.screen.notify("error",this.cronapi.i18n.translate("InvalidDate",[]));return this.cronapi.dateTime.getMomentObj(n).toDate()},this.cronapi.text={},this.cronapi.text.prompt=function(){return null},this.cronapi.text.newline=function(){return"\n"},this.cronapi.xml={},this.cronapi.xml.newXMLEmpty=function(){return $.parseXML("<?xml version=\"1.0\" encoding=\"UTF-8\"?><root></root>")},this.cronapi.xml.newXMLEmptyWithRoot=function(e){var a=$.parseXML("<?xml version=\"1.0\" encoding=\"UTF-8\"?><root></root>");return a.removeChild(a.firstElementChild),a.appendChild(e),a},this.cronapi.xml.newXMLElement=function(e,a){var t=document.createElement(e);return t.textContent=a,t},this.cronapi.xml.addXMLElement=function(e,a){try{var t=a.cloneNode(!0);return e.appendChild(t),!0}catch(a){return!1}},this.cronapi.xml.XMLHasRootElement=function(e){return!!(e&&e.getRootNode())},this.cronapi.xml.XMLGetRootElement=function(e){return e instanceof XMLDocument?e.firstElementChild:e.getRootNode()},this.cronapi.xml.XMLDocumentToText=function(e){if(e instanceof XMLDocument)return $($($(e.firstElementChild).context.outerHTML).removeAttr("xmlns"))[0].outerHTML;if(1<$(e).size()){var a="";return $.each($(e).toArray(),function(e,t){a+=$($(t)[0].outerHTML).removeAttr("xmlns")[0].outerHTML}),a}return $($($(e).context.outerHTML).removeAttr("xmlns"))[0].outerHTML},this.cronapi.xml.getChildren=function(e,a){return e instanceof XMLDocument?e.firstElementChild.toArray:a?a.localName?$(e).find(a.localName).toArray():$(e).find(a).toArray():$(e).children().toArray()},this.cronapi.xml.setAttribute=function(e,a,t){return!!a&&(e instanceof XMLDocument?(e.firstChild.setAttribute(a,t),!0):!!e&&(e.setAttribute(a,t),!0))},this.cronapi.xml.getAttributeValue=function(e,a){return a?e instanceof XMLDocument?e.firstChild.getAttribute(a)?e.firstChild.getAttribute(a):"":e&&a?e.getAttribute(a):"":""},this.cronapi.xml.getParentNode=function(e){return e instanceof XMLDocument?e.firstChild:e.parentNode},this.cronapi.xml.setElementContent=function(e,a){e instanceof XMLDocument&&(e.firstChild.textContent=a),e.textContent=a},this.cronapi.xml.getElementContent=function(e){return e instanceof XMLDocument?e.firstChild.innerText:e.innerText},this.cronapi.xml.removeElement=function(e,a){e instanceof XMLDocument?a?a instanceof HTMLUnknownElement?a.remove():$.each($(e.firstElementChild.children),function(e,t){t.localName==a&&t.remove()}):$.each($(e.firstElementChild.children),function(e,a){a.remove()}):a?a instanceof HTMLUnknownElement?a.remove():$.each($(e.children),function(e,t){t.localName==a&&t.remove()}):$.each($(e.children),function(e,a){a.remove()})},this.cronapi.xml.getElementName=function(e){return e instanceof XMLDocument?e.firstChild.localName:e.localName},this.cronapi.xml.renameElement=function(e,a){var t=e.outerHTML.replace(e.localName,a);t=t.replace("/"+e.localName,"/"+a),t=$(t).removeAttr("xmlns"),e.replaceWith(t[0])},this.cronapi.logic={},this.cronapi.logic.isNull=function(e){return null===e||"undefined"==typeof e||e==null},this.cronapi.logic.isEmpty=function(e){return""===e},this.cronapi.logic.isNullOrEmpty=function(e){return this.cronapi.logic.isNull(e)||this.cronapi.logic.isEmpty(e)},this.cronapi.logic.typeOf=function(e,a){return"array"===a?Array.isArray(e):!("object"===a&&Array.isArray(e))&&typeof e==a},this.cronapi.i18n={},this.cronapi.i18n.translate=function(e,a){if(e){for(var t,n=this.cronapi.$translate.instant(e),o=0;o<a.length;o++)if(t=a[o],null!=t&&"undefined"!=typeof t){var r=new RegExp("\\{"+o+"\\}","g");n=n.replace(r,t)}return n}},this.cronapi.internal={},this.cronapi.internal.setFile=function(e,a){this.cronapi.internal.fileToBase64(a,function(a){this.cronapi.screen.changeValueOfField(e,a)}.bind(this))},this.cronapi.internal.fileToBase64=function(e,a){var t=new FileReader;t.readAsDataURL(e),t.onload=function(t){var e=t.target.result.substr(t.target.result.indexOf("base64,")+7);a(e)}},this.cronapi.internal.startCamera=function(e){if(window.cordova&&window.cordova.platformId&&"browser"!==window.cordova.platformId){var a=this;navigator.camera.getPicture(function(t){a.cronapi.screen.changeValueOfField(e,t)},function(e){console.error(e),a.cronapi.$scope.Notification.error(message)},{quality:60,destinationType:Camera.DestinationType.DATA_URL,encodingType:Camera.EncodingType.PNG,correctOrientation:!0})}else{function a(e,a){var t=window.innerWidth,n=window.innerHeight,o=0;return o=t/e,a*=o,e*=o,e>t&&(o=t/e,a*=o,e*=o),a>n&&(o=n/a,e*=o,a*=o),{width:e,height:a}}var t="<div class=\"camera-container\" style=\"margin-left:-$marginleft$;margin-top:-$margintop$\">                                      <div class=\"btn btn-success button button-balanced\" id=\"cronapiVideoCaptureOk\" style=\"position: absolute; z-index: 999999999;\">                                          <span class=\"glyphicon glyphicon-ok icon ion-checkmark-round\"></span>                                      </div>                                      <div class=\"btn btn-danger button button-assertive button-cancel-capture\" id=\"cronapiVideoCaptureCancel\" style=\"position: absolute; margin-left: 42px; z-index: 999999999;\">                                          <span class=\"glyphicon glyphicon-remove icon ion-android-close\"></span>                                      </div>                                      <video id=\"cronapiVideoCapture\" style=\"height: $height$; width: $width$;\" autoplay=\"\"></video>                              </div>",n=null;navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(o){n=o;var r=a(o.getTracks()[0].getSettings().width,o.getTracks()[0].getSettings().height),c=r.width,s=r.height;try{c=parseInt(c/2),s=parseInt(s/2)}catch(a){}t=t.split("$height$").join(r.height+"px").split("$width$").join(r.width+"px").split("$marginleft$").join(c+"px").split("$margintop$").join(s+"px");var p=$(t);p.prependTo("body");var l=document.getElementById("cronapiVideoCapture");p.find("#cronapiVideoCaptureCancel").on("click",function(){null!=n&&0<n.getTracks().length&&n.getTracks()[0].stop(),$(p).remove()}.bind(this)),p.find("#cronapiVideoCaptureOk").on("click",function(){this.cronapi.internal.captureFromCamera(e,r.width,r.height),null!=n&&0<n.getTracks().length&&n.getTracks()[0].stop(),$(p).remove()}.bind(this)),l.srcObject=o,l.onloadedmetadata=function(){l.play()}}.bind(this))}},this.cronapi.internal.downloadFileEntityMobile=function(datasource,field,indexData){function downloadUrl(e,a){var t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",a);var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}var valueContent,itemActive,tempJsonFileUploaded=null;if(indexData)valueContent=datasource.data[indexData][field],itemActive=datasource.data[indexData];else try{valueContent=datasource.active[field],itemActive=datasource.active}catch(a){valueContent=datasource[field],itemActive=datasource}try{var tempJsonFileUploaded=JSON.parse(valueContent)}catch(a){}if(tempJsonFileUploaded){var finalUrl=this.cronapi.internal.getAddressWithHostApp("/api/cronapi/filePreview/");window.open(finalUrl+tempJsonFileUploaded.path,"_system")}else if(-1<valueContent.indexOf("dropboxusercontent"))window.open(valueContent,"_system");else if(datasource.isOData()){var bytesOrFileInput,urlCreator=window.URL||window.webkitURL||window.mozURL||window.msURL,fileName="download";valueContent.match(/__odataFile_/g)?(bytesOrFileInput=eval(valueContent),fileName=bytesOrFileInput.name):(fileName+=this.cronapi.internal.getExtensionBase64(valueContent),valueContent=window.atob(valueContent),bytesOrFileInput=this.cronapi.internal.castBinaryStringToByteArray(valueContent));var url=urlCreator.createObjectURL(new Blob([bytesOrFileInput],{type:"application/octet-stream"}));downloadUrl(url,fileName)}else{var url="/api/cronapi/downloadFile",splited=datasource.entity.split("/"),entity=splited[splited.length-1];if(-1<entity.indexOf(":")){for(var entityRelation="",splitedDomainBase=splited[3].split("."),i=0;i<splitedDomainBase.length-1;i++)entityRelation+=splitedDomainBase[i]+".";var entityRelationSplited=entity.split(":");entity=entityRelation+entityRelationSplited[entityRelationSplited.length-1]}url+="/"+entity,url+="/"+field;var object=itemActive,ids=datasource.getKeyValues(object),currentIdxId=0;for(var attr in ids)url=0==currentIdxId?url+"/"+object[attr]:url+":"+object[attr],currentIdxId++;var finalUrl=this.cronapi.internal.getAddressWithHostApp(url);window.open(finalUrl,"_system")}},this.cronapi.internal.captureFromCamera=function(e,a,t){var n=document.createElement("canvas");n.width=a,n.height=t;var o=n.getContext("2d"),r=document.getElementById("cronapiVideoCapture");o.drawImage(r,0,0,a,t);var c=n.toDataURL().substr(22);this.cronapi.screen.changeValueOfField(e,c)},this.cronapi.internal.castBinaryStringToByteArray=function(e){for(var a=e.length,t=new Uint8Array(a),n=0;n<a;n++)t[n]=e.charCodeAt(n);return t},this.cronapi.internal.castBase64ToByteArray=function(e){var a=window.atob(e);return this.cronapi.internal.castBinaryStringToByteArray(a)},this.cronapi.internal.castByteArrayToString=function(e){return _StringfromCharCode.apply(null,new Uint16Array(e))},this.cronapi.internal.generatePreviewDescriptionByte=function(data){var json;try{json=JSON.parse(data)}catch(e){try{json=JSON.parse(window.atob(data))}catch(e){if(data&&-1<data.indexOf("dropboxusercontent")){json={};var urlSplited=data.split("/"),fullName=urlSplited[urlSplited.length-1].replace("?dl=0",""),fullNameSplited=fullName.split("."),extension="."+fullNameSplited[fullNameSplited.length-1];json.fileExtension=extension,json.name=fullName.replace(extension,""),json.contentType="file/"+extension.replace(".","")}else if(data&&data.match(/__odataFile_/g)){var file=eval(data),fullNameSplited=file.name.split("."),extension="."+fullNameSplited[fullNameSplited.length-1];json={},json.fileExtension=extension,json.name=file.name,json.contentType=file.type||"unknown"}else if(data&&this.cronapi.internal.isBase64(data)){var fileName="download",fileExtesion=this.cronapi.internal.getExtensionBase64(data),contentType=this.cronapi.internal.getContentTypeFromExtension(fileExtesion);fileName+=fileExtesion,json={},json.fileExtension=fileExtesion,json.name=fileName,json.contentType=contentType}}}if(json){25<json.name.length&&(json.name=json.name.substr(0,22)+"...");var result="<b>Nome:</b> <br/>"+json.name+"<br/>";return result+="<b>Content-Type:</b> <br/>"+json.contentType+"<br/>",result+="<b>Extens\xE3o:</b> <br/>"+json.fileExtension+"<br/>",result}},this.cronapi.internal.getContentTypeFromExtension=function(e){if(e)switch(e.toLowerCase()){case".png":return"image/png";case".jpg":return"image/jpeg";case".mp4":return"video/mp4";case".pdf":return"application/pdf";case".ico":return"image/vnd.microsoft.icon";case".rar":return"application/x-rar-compressed";case".rtf":return"application/rtf";case".txt":return"text/plain";case".zip":return"application/zip";case".srt":return"text/srt";default:return"unknown";}},this.cronapi.internal.getExtensionBase64=function(e){if(e){var a=e.substr(0,5);switch(a.toLocaleUpperCase()){case"IVBOR":return".png";case"/9J/4":return".jpg";case"AAAAF":return".mp4";case"JVBER":return".pdf";case"AAABA":return".ico";case"UMFYI":return".rar";case"E1XYD":return".rtf";case"U1PKC":return".txt";case"UESDB":return".zip";case"MQOWM":case"77U/M":return".srt";default:return"";}}return""},this.cronapi.internal.isBase64=function(e){try{return btoa(atob(e))==e}catch(e){return!1}},this.cronapi.internal.downloadFileEntity=function(datasource,field,indexData){function downloadUrl(e,a){var t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("download",a);var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}var valueContent,itemActive,tempJsonFileUploaded=null;if(indexData)valueContent=datasource.data[indexData][field],itemActive=datasource.data[indexData];else try{valueContent=datasource.active[field],itemActive=datasource.active}catch(a){valueContent=datasource[field],itemActive=datasource}try{var tempJsonFileUploaded=JSON.parse(valueContent)}catch(a){}if(tempJsonFileUploaded)window.open("/api/cronapi/filePreview/"+tempJsonFileUploaded.path);else if(-1<valueContent.indexOf("dropboxusercontent"))window.open(valueContent);else if(datasource.isOData()){var bytesOrFileInput,urlCreator=window.URL||window.webkitURL||window.mozURL||window.msURL,fileName="download";valueContent.match(/__odataFile_/g)?(bytesOrFileInput=eval(valueContent),fileName=bytesOrFileInput.name):(fileName+=this.cronapi.internal.getExtensionBase64(valueContent),valueContent=window.atob(valueContent),bytesOrFileInput=this.cronapi.internal.castBinaryStringToByteArray(valueContent));var url=urlCreator.createObjectURL(new Blob([bytesOrFileInput],{type:"application/octet-stream"}));downloadUrl(url,fileName)}else{var url="/api/cronapi/downloadFile",splited=datasource.entity.split("/"),entity=splited[splited.length-1];if(-1<entity.indexOf(":")){for(var entityRelation="",splitedDomainBase=splited[3].split("."),i=0;i<splitedDomainBase.length-1;i++)entityRelation+=splitedDomainBase[i]+".";var entityRelationSplited=entity.split(":");entity=entityRelation+entityRelationSplited[entityRelationSplited.length-1]}url+="/"+entity,url+="/"+field;var _u=JSON.parse(localStorage.getItem("_u")),object=itemActive,finalUrl=this.cronapi.internal.getAddressWithHostApp(url);this.$promise=this.cronapi.$scope.$http({method:"POST",url:finalUrl,data:object?JSON.stringify(object):null,responseType:"blob",headers:{"Content-Type":"application/json","X-AUTH-TOKEN":_u.token}}).success(function(e,a,t){t=t();var n=t["x-filename"]||"download.bin",o=window.URL||window.webkitURL||window.mozURL||window.msURL;try{var r=o.createObjectURL(e);downloadUrl(r,n)}catch(e){console.log("Error downloading file"),console.log(e)}}.bind(this)).error(function(){console.log("Error downloading file")}.bind(this))}},this.cronapi.internal.uploadFileAjax=function(e,a,t){var n=new FormData;n.append("file",a);var o=JSON.parse(localStorage.getItem("_u")),r=this.cronapi.internal.getAddressWithHostApp("/api/cronapi/uploadFile");this.$promise=this.cronapi.$scope.$http({method:"POST",url:r,data:n,headers:{"Content-Type":void 0,"X-AUTH-TOKEN":o.token},onProgress:function(e){if(e.lengthComputable){var a=0|100*(e.loaded/e.total),n=$("#"+t);if(0<n.length)if("bootstrapProgress"==n.data("type"))100>a?(n.show(),n.find(".progress-bar").css("width",a+"%")):(n.hide(),n.find(".progress-bar").css("width","0%"));else{var o=document.getElementById(t);o.value=o.innerHTML=a}}}}).success(function(a){this.cronapi.screen.changeValueOfField(e,a.jsonString)}.bind(this)).error(function(){alert("Error uploading file")}.bind(this))},this.cronapi.internal.uploadFile=function(field,file,progressId){if(file){var regexForDatasource=/(.*?).active./g,groupDatasource=regexForDatasource.exec(field);if(groupDatasource){var datasource=eval(groupDatasource[1]);if(datasource.isOData()){var regexForField=/.active.([a-zA-Z0-9_-]*)/g,groupField=regexForField.exec(field),fieldName=groupField[1],schemaField=datasource.getFieldSchema(fieldName);schemaField&&"Binary"==schemaField.type?(datasource.active["__odataFile_"+fieldName]=file,datasource.active[fieldName]=datasource.name+".active.__odataFile_"+fieldName):this.cronapi.internal.uploadFileAjax(field,file,progressId)}else this.cronapi.internal.uploadFileAjax(field,file,progressId)}else this.cronapi.internal.uploadFileAjax(field,file,progressId)}},this.cronapi.object={},this.cronapi.object.getProperty=function(e,a){var t=a.split(".");if(1<t.length){var n=function(e,a,t){return t||(t=0),void 0===e[a[t]]&&(e[a[t]]={}),t++,t<a.length?n(e[a[t-1]],a,t):e[a[t-1]]};return n(e,t,0)}return e[a]},this.cronapi.object.setProperty=function(e,a,t){var n=a.split(".");if(1<n.length){var o=function(e,a,t,n){n||(n=0),e[a[n]]===void 0&&(e[a[n]]={}),n++,n<a.length?o(e[a[n-1]],a,t,n):e[a[n-1]]=t};o(e,n,t,0)}else e[a]=t},this.cronapi.object.createObjectFromString=function(e){return JSON.parse(e)},this.cronapi.object.serializeObject=function(e){return JSON.stringify(e)},this.cronapi.object.deleteProperty=function(e,a){delete e[a]},this.cronapi.object.newObject=function(){var e={};if(arguments&&0<arguments.length)for(var a,t=0;t<arguments.length;t++)a=arguments[t],a.name&&(e[a.name]=a.value);return e},this.cronapi.object.getObjectField=function(e,a){var t;return e&&a&&(t=e[a]),t},this.cronapi.json={},this.cronapi.json.createObjectFromString=function(e){return this.cronapi.object.createObjectFromString(e)},this.cronapi.json.setProperty=function(e,a,t){this.cronapi.object.setProperty(e,a,t)},this.cronapi.json.deleteProperty=function(e,a){this.cronapi.object.deleteProperty(e,a)},this.cronapi.json.getProperty=function(e,a){return this.cronapi.object.getProperty(e,a)},this.cronapi.cordova={},this.cronapi.cordova.vibrate=function(e){navigator.vibrate(e)},this.cronapi.cordova.device={},this.cronapi.cordova.device.getFirebaseToken=function(e,a){window.FirebasePlugin.getToken(e,a)},this.cronapi.cordova.device.getFirebaseNotificationData=function(e,a){document.addEventListener("deviceready",function(){window.FirebasePlugin.onNotificationOpen(function(a){e(a)},function(e){a(e)})},!1)},this.cronapi.cordova.device.getDeviceInfo=function(e){return window.device[e]},this.cronapi.cordova.geolocation={},this.cronapi.cordova.geolocation.getCurrentPosition=function(e,a){navigator.geolocation.getCurrentPosition(e,a)},this.cronapi.cordova.geolocation.watchPosition=function(e,a,t,n,o){return navigator.geolocation.watchPosition(e,a,{maximumAge:t,timeout:n,enableHighAccuracy:o})},this.cronapi.cordova.geolocation.clearWatchPosition=function(e){navigator.geolocation.clearWatch(e)},this.cronapi.cordova.camera={},this.cronapi.cordova.camera.getPicture=function(e,a,t,n,o,r){(o===void 0||null===o)&&(o=0),r=!0===r||"true"===r,navigator.camera.getPicture(e,a,{destinationType:+t,sourceType:+n,mediaType:+o,allowEdit:r})},this.cronapi.cordova.camera.qrCodeScanner=function(e,a,t,n){cordova.plugins.barcodeScanner.scan(function(e){t(e.text)},function(e){n(e)},{preferFrontCamera:!1,showFlipCameraButton:!0,showTorchButton:!0,saveHistory:!0,prompt:a,resultDisplayDuration:500,formats:e,orientation:"portrait",disableAnimations:!0,disableSuccessBeep:!1})},this.cronapi.cordova.file={},this.cronapi.cordova.file.getDirectory=function(e){var a;return"0"==e?a=cordova.file.dataDirectory:(a=cordova.file.externalApplicationStorageDirectory,!a&&(a=cordova.file.externalDataDirectory),!a&&(a=cordova.file.syncedDataDirectory)),a},this.cronapi.cordova.file.removeFile=function(e,a,t){window.resolveLocalFileSystemURL(e,function(e){e.remove(function(e){a&&a(e)}.bind(this),t)}.bind(this),t)},this.cronapi.cordova.file.readFile=function(e,a,t,n){window.resolveLocalFileSystemURL(e,function(e){e.file(function(e){var t=new FileReader;switch(t.onloadend=function(){a(this.result)},n){case"ARRAYBUFFER":{t.readAsArrayBuffer(e);break}case"TEXT":{t.readAsText(e);break}case"BINARYSTRING":{t.readAsBinaryString(e);break}case"DATAURL":{t.readAsDataURL(e);break}default:t.readAsText(e);}}.bind(this),t)}.bind(this),t)},this.cronapi.cordova.file.createFile=function(e,a,t,n,o){e||getDirectory(0);window.resolveLocalFileSystemURL(e,function(r){console.log(e),r.getFile(a,{create:!0},function(e){e.createWriter(function(e){e.onwriteend=function(){console.log("Write of file \""+a+"\"\" completed.")},e.onerror=function(a){console.log("Write failed: "+a.toString())};var o=new Blob([t],{type:"text/plain"});e.write(o),n&&setTimeout(function(){n()}.bind(this),500)}.bind(this),o)}.bind(this),o)}.bind(this),o)},this.cronapi.cordova.file.createDirectory=function(e,a,t,n){window.resolveLocalFileSystemURL(e,function(){parentEntry.getDirectory(a,{create:!0},function(e){t&&t(e)}.bind(this),n)}.bind(this),n)},this.cronapi.cordova.storage={},this.cronapi.cordova.storage.setStorageItem=function(e,a){var t=window.localStorage;t?t.setItem(e,a):console.error("Local Storage not Found!")},this.cronapi.cordova.storage.getStorageItem=function(e){var a=window.localStorage;return a?a.getItem(e):void console.error("Local Storage not Found!")},this.cronapi.cordova.storage.removeStorageItem=function(e){var a=window.localStorage;a?a.removeItem(e):console.error("Local Storage not Found!")},this.cronapi.cordova.connection={},this.cronapi.cordova.connection.getConnection=function(){return navigator.connection.type},this.cronapi.cordova.connection.verifyConnection=function(e){return navigator.connection.type==e},this.cronapi.cordova.database={},this.cronapi.cordova.database.nameDefault="cronappDB",this.cronapi.cordova.database.openDatabase=function(e){return e?window.openDatabase(e,"1.0",e,1e6):window.openDatabase(this.cronapi.cordova.database.nameDefault,"1.0",this.cronapi.cordova.database.nameDefault,1e6)},this.cronapi.cordova.database.executeSql=function(e,a,t,n,o){var r=this.cronapi.cordova.database.openDatabase(e);r.transaction(function(e){e.executeSql(a,t,function(e,a){n.call(this,Object.values(a.rows))}.bind(this))}.bind(this),function(a){console.log(a),o(a)}.bind(this))},this.cronapi.internal.ptDate=function(e){var a,t=e[1],n=e[2],o=e[3],r=e[5],c=e[6],s=e[7];return a=r?new Date(o,n-1,t,r,c,s):new Date(o,n-1,t,0,0,0),a},this.cronapi.internal.enDate=function(e){var a,t=e[1],n=e[2],o=e[3],r=e[5],c=e[6],s=e[7];return a=r?new Date(o,t-1,n,r,c,s):new Date(o,t-1,n,0,0,0),a},this.cronapi.internal.parseBoolean=function(e){return!!e&&("boolean"==typeof e?e:(e=e.toString().toLowerCase().trim(),"1"==e||"true"==e))},this.cronapi.internal.removeAccents=function(e){var a="";for(i=0;i<e.length;i++)a+=0<="\xE1\xE0\xE3\xE2\xE4\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF3\xF2\xF5\xF4\xF6\xFA\xF9\xFB\xFC\xE7\xC1\xC0\xC3\xC2\xC4\xC9\xC8\xCA\xCB\xCD\xCC\xCE\xCF\xD3\xD2\xD5\xD6\xD4\xDA\xD9\xDB\xDC\xC7".search(e.substr(i,1))?"aaaaaeeeeiiiiooooouuuucAAAAAEEEEIIIIOOOOOUUUUC".substr("\xE1\xE0\xE3\xE2\xE4\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF3\xF2\xF5\xF4\xF6\xFA\xF9\xFB\xFC\xE7\xC1\xC0\xC3\xC2\xC4\xC9\xC8\xCA\xCB\xCD\xCC\xCE\xCF\xD3\xD2\xD5\xD6\xD4\xDA\xD9\xDB\xDC\xC7".search(e.substr(i,1)),1):e.substr(i,1);return a},this.cronapi.internal.arrayRemove=function(e,a){var t=this.cronapi.internal.arrayIndexOf(e,a);-1!=t&&e.splice(t,1)},this.cronapi.internal.arrayIndexOf=function(e,a){var t=-1;return $(e).each(function(e){a==this&&(t=e)}),t},this.cronapi.internal.replaceAll=function(e,a,t){return e.toString().split(a).join(t)},this.cronapi.internal.getWindowHeight=function(){$(window).height()},this.cronapi.internal.getWindowWidth=function(){$(window).width()},this.cronapi.internal.getAddressWithHostApp=function(e){var a=window.hostApp||"";if(a=a.endsWith("/")?a.substr(0,a.length-1):a,e){var t=e.startsWith("/")?e.substr(1):e;a=""===a?t:a+"/"+t}return a},this.cronapi.internal.Url={encode:function(e){return e?escape(this.cronapi.internal.Url._utf8_encode(e)):""},decode:function(e){return e?this.cronapi.internal.Url._utf8_decode(unescape(e)):""},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var a,t="",o=0;o<e.length;o++)a=e.charCodeAt(o),128>a?t+=_StringfromCharCode(a):127<a&&2048>a?(t+=_StringfromCharCode(192|a>>6),t+=_StringfromCharCode(128|63&a)):(t+=_StringfromCharCode(224|a>>12),t+=_StringfromCharCode(128|63&a>>6),t+=_StringfromCharCode(128|63&a));return t},_utf8_decode:function(e){for(var a="",t=0,n=c1=c2=0;t<e.length;)n=e.charCodeAt(t),128>n?(a+=_StringfromCharCode(n),t++):191<n&&224>n?(c2=e.charCodeAt(t+1),a+=_StringfromCharCode((31&n)<<6|63&c2),t+=2):(c2=e.charCodeAt(t+1),c3=e.charCodeAt(t+2),a+=_StringfromCharCode((15&n)<<12|(63&c2)<<6|63&c3),t+=3);return a}},this.cronapi.internal.stringToJs=function(e){return(e+"").replace(/[\\"']/g,"\\$&").replace(/\u0000/g,"\\0")},this.cronapi.internal.getErrorMessage=function(e,a){try{var t=JSON.parse(e);if(t&&t.error)return t.error}catch(a){}return a},this.cronapi.util.upload=function(e,a,t,n,o){this.UploadService.upload({description:a,id:e,filter:t,maxSize:n,multiple:o,scope:this})},this.cronapi.chart={},this.cronapi.chart.createChart=function(e,a,t,n){function o(){return l<p.length?l++:l=0,l}function r(){""==m.data.datasets[0].label&&(null==m.options.legend?(m.options.legend={},m.options.legend.display=!1):m.options.legend.display=!1)}function c(e){for(var a=[],t=4;t<e.length;t++)e[t].label?e[t].options?(e[t].data?a.push(cronapi.chart.createDataset(e[t].label,e[t].data,e[t].options)):a.push(cronapi.chart.createDataset(e[t].label,e[t],null)),a.push(cronapi.chart.createDataset(e[t].label,e[t].data,e[t].options))):a.push(cronapi.chart.createDataset(e[t].label,e[t].data,null)):e[t].options?(e[t].data?a.push(cronapi.chart.createDataset(null,e[t].data,e[t].options)):a.push(cronapi.chart.createDataset(null,e[t],e[t].options)),a.push(cronapi.chart.createDataset(null,e[t].data,e[t].options))):e[t].data?a.push(cronapi.chart.createDataset(null,e[t].data,null)):a.push(cronapi.chart.createDataset(null,e[t],null));return a}function s(){null==m.options?(m.options={},m.options.scales={},m.options.scales.yAxes=[{ticks:{beginAtZero:!0}}]):null==m.options.scales&&(m.options.scales={},m.options.scales.yAxes=[{ticks:{beginAtZero:!0}}])}var p=["#FF5C00","#0E53A7","#48DD00","#FFD500","#7309AA","#CD0074","#00AF64","#BF8230","#F16D95","#A65000","#A65000","#AF66D5"],l=0,d=document.getElementById(e);d._chart&&d._chart.destroy(),d.getContext("2d");var m={};if(m.type=a,m.data=[],m.options={},m.data.labels=Array.isArray(t)?t:JSON.parse(t),m.data.datasets=[],Array.isArray(n))m.options=n;else if(""!=n&&null!=n)try{m.options=JSON.parse(n)}catch(a){m.options={},console.log(a)}else m.options={};switch(a){case"line":{m.data.datasets=c(arguments),$.each(m.data.datasets,function(e,a){a.fill=!1,a.backgroundColor=p[o()],a.borderColor=a.backgroundColor,s(),r()});break}case"bar":case"horizontalBar":{m.data.datasets=c(arguments),$.each(m.data.datasets,function(e,a){a.backgroundColor=p[o()],a.borderColor=a.backgroundColor}),s(),r();break}case"doughnut":case"pie":case"polarArea":{var g=c(arguments);$.each(g,function(e){var a={};a=g[e],a.backgroundColor=[],a.borderColor=[],$.each(a.data,function(){a.backgroundColor.push(p[o()])}),a.borderColor=a.backgroundColor,m.data.datasets.push(a),l=0});break}default:}var u=new Chart(d,m);d._chart=u},this.cronapi.chart.createDataset=function(e,a,t){var n={};return n.label=e?e:"",n.data=Array.isArray(a)?a:a?JSON.parse(a):[],n.options=Array.isArray(t)?t:JSON.parse(t),n},this.cronapi.social={},this.cronapi.social.gup=function(e,a){a||(a=location.href),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t="[\\?&]"+e+"=([^&#]*)",n=new RegExp(t),o=n.exec(a);return null==o?null:o[1]},this.cronapi.social.login=function(e,a,t){var n;this.cronapi.screen.showLoading(),this.cronapi.logic.isNullOrEmpty(this.cronapi.screen.getHostapp())?(this.cronapi.screen.hide(),this.cronapi.screen.notify("error","HostApp is Required")):this.cronapi.util.getURLFromOthers("POST","application/x-www-form-urlencoded",this.cronapi.screen.getHostapp()+""+"auth",this.cronapi.object.createObjectFromString(["{ \"username\": \"",e,"\" , \"password\": \"",a,"\" } "].join("")),this.cronapi.object.createObjectFromString(["{ \"X-AUTH-TOKEN\": \"",t,"\" } "].join("")),function(e){n=e,this.cronapi.screen.hide(),this.cronapi.util.setLocalStorage("_u",this.cronapi.object.serializeObject(n)),this.cronapi.screen.changeView("#/app/logged/home",[])}.bind(this),function(e){n=e,"403"==this.cronapi.object.getProperty(n,"status")||"401"==this.cronapi.object.getProperty(n,"status")?this.cronapi.screen.notify("error",this.cronapi.i18n.translate("LoginViewInvalidpassword",[])):this.cronapi.screen.notify("error",this.cronapi.object.getProperty(n,"responseJSON.message")),this.cronapi.screen.hide()}.bind(this))},this.cronapi.social.sociaLogin=function(e,a){var t=this,n=window.hostApp+"signin/"+e+"/";if(cordova.InAppBrowser){var o="";(!0===a||"true"===a)&&(o=",clearcache=yes");var r=cordova.InAppBrowser.open(n,"_blank","location=no"+o);r.addEventListener("loadstart",function(e){-1<e.url.indexOf("_ctk")&&(r.close(),t.cronapi.social.login.bind(t)("#OAUTH#","#OAUTH#",t.cronapi.social.gup("_ctk",e.url)))})}else;},this.cronapi.screen.getSelectedRowsGrid=function(e){var a=[],t=$("[ng-model=\""+e+"\"]").children().data("kendoGrid");if(t){var n=t.select();n.each(function(){var e=t.dataItem(this);a.push(e)})}return a}}.bind(window)();